<app-header></app-header>
<h2 class="text-center">Пользователи</h2>
<div class="container table-wrapper">
<h1 class="text-center wrapper font-weight-bold"></h1>
<mat-form-field>
  <mat-label>Фильтр</mat-label>
  <input matInput (keyup)="applyFilter($event)" pattern="Введите фильтр">
</mat-form-field>

<table mat-table [dataSource]="datasource" matSort class="mat-elevation-z8">

  <ng-container matColumnDef="login">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Login </th>
    <td mat-cell *matCellDef="let element">
      {{element.login}}
    </td>
  </ng-container>

  <ng-container matColumnDef="email">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
    <td mat-cell *matCellDef="let element">
      {{element.email}}
    </td>
  </ng-container>

  <ng-container matColumnDef="role">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Role </th>
    <td mat-cell *matCellDef="let element">
      {{element.role}}
    </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Действия </th>
    <td mat-cell *matCellDef="let row">
      <button *ngIf="row.role === 'open'" mat-raised-button color="warn" (click)="blockUser(row.login)">Заблокировать</button>
      <button *ngIf="row.role === 'blocked'" mat-raised-button color="primary" (click)="unBlockUser(row.login)">Разблокировать</button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns" class="mat-header-row"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="mat-row"></tr>

</table>
</div>
